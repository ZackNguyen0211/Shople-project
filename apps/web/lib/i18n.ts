import { cookies } from 'next/headers';

export type Lang = 'vi' | 'en';

export function getLang(): Lang {
  const v = cookies().get('lang')?.value;
  return v === 'en' || v === 'vi' ? v : 'vi';
}

export type Dict = ReturnType<typeof getDict>;

export function getDict(lang: Lang = getLang()) {
  const common = {
    appName: 'Shoople',
    prev: lang === 'en' ? 'Prev' : 'Trước',
    next: lang === 'en' ? 'Next' : 'Sau',
  };
  const vi = {
    ...common,
    nav: {
      shops: 'Cửa hàng',
      orders: 'Đơn hàng',
      cart: 'Giỏ hàng',
      account: 'Tài khoản',
      shopManage: 'Quản lý shop',
      admin: 'Quản trị',
      login: 'Đăng nhập',
      logout: 'Đăng xuất',
    },
    search: { placeholder: 'Tìm kiếm sản phẩm', button: 'Tìm' },
    footer: {
      links: 'Liên kết',
      home: 'Trang chủ',
      shops: 'Cửa hàng',
      orders: 'Đơn hàng',
      contact: 'Liên hệ',
      tagline: 'Dự án thương mại điện tử demo.',
    },
    home: { welcome: 'Chào mừng đến Shoople', categories: 'Danh mục' },
    categories: [
      { name: 'Thời Trang Nam', q: 'men', icon: 'shirt' },
      { name: 'Điện Thoại & Phụ Kiện', q: 'phone', icon: 'smartphone' },
      { name: 'Thiết Bị Điện Tử', q: 'electronics', icon: 'zap' },
      { name: 'Máy Tính & Laptop', q: 'laptop', icon: 'laptop' },
      { name: 'Máy Ảnh & Quay Phim', q: 'camera', icon: 'camera' },
      { name: 'Đồng Hồ', q: 'watch', icon: 'watch' },
      { name: 'Giày Dép Nam', q: 'shoes men', icon: 'shoe' },
      { name: 'Gia Dụng', q: 'home', icon: 'home' },
      { name: 'Thể Thao & Du Lịch', q: 'sport', icon: 'activity' },
      { name: 'Ô Tô & Xe Máy', q: 'auto', icon: 'truck' },
      { name: 'Thời Trang Nữ', q: 'women', icon: 'dress' },
      { name: 'Mẹ & Bé', q: 'baby', icon: 'baby' },
      { name: 'Nhà Cửa & Đời Sống', q: 'living', icon: 'sofa' },
      { name: 'Sắc Đẹp', q: 'beauty', icon: 'sparkles' },
      { name: 'Sức Khỏe', q: 'health', icon: 'heart' },
      { name: 'Giày Dép Nữ', q: 'shoes women', icon: 'heel' },
      { name: 'Túi Ví Nữ', q: 'bag', icon: 'bag' },
      { name: 'Trang Sức', q: 'jewelry', icon: 'ring' },
      { name: 'Bách Hóa', q: 'grocery', icon: 'shopping-bag' },
      { name: 'Sách', q: 'book', icon: 'book' },
    ],
    product: { soldBy: 'Bán bởi', addToCart: 'Thêm vào giỏ' },
    cart: {
      title: 'Giỏ hàng',
      empty: 'Giỏ hàng trống.',
      product: 'Sản phẩm',
      qty: 'Số lượng',
      price: 'Giá',
      total: 'Tổng',
      checkout: 'Thanh toán',
    },
    orders: {
      title: 'Đơn hàng',
      view: 'Xem',
      status: 'Trạng thái',
      total: 'Tổng',
      none: 'Bạn chưa có đơn hàng nào.',
    },
    orderDetail: {
      title: (id: number) => `Đơn hàng #${id}`,
      status: 'Trạng thái',
      productId: 'Mã sản phẩm',
      qty: 'Số lượng',
      price: 'Giá',
    },
    checkout: {
      title: 'Thanh toán',
      payNow: 'Thanh toán ngay',
      backToCart: 'Quay lại giỏ hàng',
      note: 'Trang thanh toán demo (sẽ tích hợp sau).',
    },
    searchPage: { title: 'Tìm kiếm' },
    filters: {
      allStatuses: 'Tất cả trạng thái',
      newest: 'Mới nhất',
      oldest: 'Cũ nhất',
      apply: 'Lọc',
    },
    adminPage: {
      title: 'Bảng điều khiển quản trị',
      revenue: 'Tổng doanh thu',
      users: 'Người dùng',
      shops: 'Cửa hàng',
      products: 'Sản phẩm',
      recentOrders: 'Đơn hàng gần đây',
      noRecent: 'Không có đơn hàng.',
    },
    adminButtons: {
      users: 'Quản lý người dùng',
      shops: 'Quản lý cửa hàng',
      products: 'Quản lý sản phẩm',
      orders: 'Quản lý đơn hàng',
    },
    tables: {
      id: 'ID',
      items: 'Mặt hàng',
      total: 'Tổng',
      status: 'Trạng thái',
      user: 'Người dùng',
      shop: 'Cửa hàng',
      title: 'Tiêu đề',
      price: 'Giá',
      actions: '',
    },
    pagination: { page: (p: number, tp: number) => `Trang ${p} / ${tp}` },
    shopsList: { title: 'Cửa hàng', viewProducts: 'Xem sản phẩm' },
    shopManage: {
      title: 'Quản lý shop',
      yourShops: 'Shop của bạn',
      orders: 'Đơn hàng',
      addProduct: 'Thêm sản phẩm mới',
      none: 'Không có đơn hàng.',
    },
  } as const;

  const en = {
    ...common,
    nav: {
      shops: 'Shops',
      orders: 'Orders',
      cart: 'Cart',
      account: 'Account',
      shopManage: 'Shop Management',
      admin: 'Admin',
      login: 'Log in',
      logout: 'Log out',
    },
    search: { placeholder: 'Search products', button: 'Search' },
    footer: {
      links: 'Links',
      home: 'Home',
      shops: 'Shops',
      orders: 'Orders',
      contact: 'Contact',
      tagline: 'A simple demo e-commerce project.',
    },
    home: { welcome: 'Welcome to Shoople', categories: 'Categories' },
    categories: [
      { name: 'Men Fashion', q: 'men', icon: 'shirt' },
      { name: 'Phones & Accessories', q: 'phone', icon: 'smartphone' },
      { name: 'Electronics', q: 'electronics', icon: 'zap' },
      { name: 'Computers & Laptops', q: 'laptop', icon: 'laptop' },
      { name: 'Cameras & Video', q: 'camera', icon: 'camera' },
      { name: 'Watches', q: 'watch', icon: 'watch' },
      { name: 'Men Shoes', q: 'shoes men', icon: 'shoe' },
      { name: 'Home & Kitchen', q: 'home', icon: 'home' },
      { name: 'Sports & Travel', q: 'sport', icon: 'activity' },
      { name: 'Auto & Motor', q: 'auto', icon: 'truck' },
      { name: 'Women Fashion', q: 'women', icon: 'dress' },
      { name: 'Mom & Baby', q: 'baby', icon: 'baby' },
      { name: 'Home Living', q: 'living', icon: 'sofa' },
      { name: 'Beauty', q: 'beauty', icon: 'sparkles' },
      { name: 'Health', q: 'health', icon: 'heart' },
      { name: 'Women Shoes', q: 'shoes women', icon: 'heel' },
      { name: 'Bags', q: 'bag', icon: 'bag' },
      { name: 'Jewelry', q: 'jewelry', icon: 'ring' },
      { name: 'Groceries', q: 'grocery', icon: 'shopping-bag' },
      { name: 'Books', q: 'book', icon: 'book' },
    ],
    product: { soldBy: 'Sold by', addToCart: 'Add to cart' },
    cart: {
      title: 'Cart',
      empty: 'Your cart is empty.',
      product: 'Product',
      qty: 'Qty',
      price: 'Price',
      total: 'Total',
      checkout: 'Checkout',
    },
    orders: {
      title: 'Orders',
      view: 'View',
      status: 'Status',
      total: 'Total',
      none: 'You have no orders yet.',
    },
    orderDetail: {
      title: (id: number) => `Order #${id}`,
      status: 'Status',
      productId: 'Product ID',
      qty: 'Qty',
      price: 'Price',
    },
    checkout: {
      title: 'Checkout',
      payNow: 'Pay now',
      backToCart: 'Back to cart',
      note: 'Payment placeholder (integrate later).',
    },
    searchPage: { title: 'Search' },
    filters: {
      allStatuses: 'All statuses',
      newest: 'Newest first',
      oldest: 'Oldest first',
      apply: 'Apply',
    },
    adminPage: {
      title: 'Admin Dashboard',
      revenue: 'Total Revenue',
      users: 'Users',
      shops: 'Shops',
      products: 'Products',
      recentOrders: 'Recent Orders',
      noRecent: 'No recent orders.',
    },
    adminButtons: {
      users: 'Manage Users',
      shops: 'Manage Shops',
      products: 'Manage Products',
      orders: 'Manage Orders',
    },
    tables: {
      id: 'ID',
      items: 'Items',
      total: 'Total',
      status: 'Status',
      user: 'User',
      shop: 'Shop',
      title: 'Title',
      price: 'Price',
      actions: '',
    },
    pagination: { page: (p: number, tp: number) => `Page ${p} / ${tp}` },
    shopsList: { title: 'Shops', viewProducts: 'View products' },
    shopManage: {
      title: 'Shop Management',
      yourShops: 'Your Shops',
      orders: 'Orders',
      addProduct: 'Add new product',
      none: 'No orders found.',
    },
  } as const;

  return lang === 'en' ? en : vi;
}
